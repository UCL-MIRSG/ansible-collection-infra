auth.method=openid
type=openid
# Open ID Providers are not visible they are accessed via login links
auto.enabled=true
auto.verified=true

provider.id={{ xnat_oidc_provider_id }}
# Name displayed in the UI
name={{ xnat_oidc_display_name }}
# Site URL - the main domain, needed to build the pre-established URL below.
siteUrl={{ xnat_oidc_site_url }}
preEstablishedRedirUri={{ xnat_oidc_pre_established_redir_uri }}

# {{ xnat_oidc_provider_id }} OpenID
openid.{{ xnat_oidc_provider_id }}.clientId={{ xnat_oidc_client_id }}
openid.{{ xnat_oidc_provider_id }}.clientSecret={{ xnat_oidc_client_secret }}
openid.{{ xnat_oidc_provider_id }}.accessTokenUri={{ xnat_oidc_access_token_uri }}
openid.{{ xnat_oidc_provider_id }}.userAuthUri={{ xnat_oidc_user_auth_uri }}
openid.{{ xnat_oidc_provider_id }}.scopes={{ xnat_oidc_scopes }}
openid.{{ xnat_oidc_provider_id }}.link={{ xnat_oidc_login_link }}

# Flag that sets if we should be checking email domains
openid.{{ xnat_oidc_provider_id }}.shouldFilterEmailDomains={{ xnat_oidc_should_filter_email_domains }}
{% if xnat_oidc_should_filter_email_domains %}
# Domains below are allowed to login, only checked when 'shouldFilterEmailDomains' is true
openid.{{ xnat_oidc_provider_id }}.allowedEmailDomains={{ xnat_oidc_allowed_email_domains | join(',') }}
{% endif %}

# Flag to force the user creation process, normally this should be set to true
openid.{{ xnat_oidc_provider_id }}.forceUserCreate={{ xnat_oidc_force_user_create }}
# Flag to set the enabled property of new users, set to false to allow admins to manually enable users before allowing logins, set to true to allow access right away
openid.{{ xnat_oidc_provider_id }}.userAutoEnabled={{ xnat_oidc_user_auto_enabled }}
# Flag to set the verified property of new users
openid.{{ xnat_oidc_provider_id }}.userAutoVerified={{ xnat_oidc_user_auto_verified }}
# Flag to enable PKCE support, set to true if the OpenID provider supports PKCE
openid.{{ xnat_oidc_provider_id }}.pkceEnabled={{ xnat_oidc_pkce_enabled }}

# Property names to use when creating users
openid.{{ xnat_oidc_provider_id }}.emailProperty={{ xnat_oidc_email_property }}
openid.{{ xnat_oidc_provider_id }}.givenNameProperty={{ xnat_oidc_given_name_property }}
openid.{{ xnat_oidc_provider_id }}.familyNameProperty={{ xnat_oidc_family_name_property }}
openid.{{ xnat_oidc_provider_id }}.usernamePattern={{ xnat_oidc_username_pattern }}
